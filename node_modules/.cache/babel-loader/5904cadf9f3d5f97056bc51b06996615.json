{"ast":null,"code":"import _slicedToArray from\"/Users/meetdhabaliya/Desktop/MERN APP/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from'react';import{AppBar,Typography,Toolbar,Button,Avatar}from'@material-ui/core';import useStyles from'./styles';import memories from'../../images/memories.jpg';import{Link,useLocation}from'react-router-dom';import{useDispatch}from'react-redux';import decode from'jwt-decode';var Navbar=function Navbar(){var classes=useStyles();var dispatch=useDispatch();var location=useLocation();var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var logout=function logout(){dispatch({type:'LOGOUT'});setUser(null);// navigate('/')\nwindow.location.reload();};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime()){logout();}}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);return/*#__PURE__*/React.createElement(AppBar,{className:classes.appBar,position:\"static\",color:\"inherit\"},/*#__PURE__*/React.createElement(Link,{to:\"/\",style:{textDecoration:'none'},className:classes.brandContainer},/*#__PURE__*/React.createElement(Typography,{className:classes.heading,variant:\"h2\",align:\"center\"},\"Memories\")),/*#__PURE__*/React.createElement(Toolbar,{className:classes.toolbar},user?/*#__PURE__*/React.createElement(\"div\",{className:classes.profile},/*#__PURE__*/React.createElement(Avatar,{className:classes.purple,alt:user.result.name,src:user.result.imageUrl},user.result.name.charAt(0)),/*#__PURE__*/React.createElement(Typography,{className:classes.userName,variant:\"h6\"},user.result.name),/*#__PURE__*/React.createElement(Button,{className:classes.logout,variant:\"contained\",color:\"secondary\",onClick:logout},\"Logout\")):/*#__PURE__*/React.createElement(Button,{component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\"},\"Sign In\")));};export default Navbar;","map":{"version":3,"names":["React","useEffect","useState","AppBar","Typography","Toolbar","Button","Avatar","useStyles","memories","Link","useLocation","useDispatch","decode","Navbar","classes","dispatch","location","JSON","parse","localStorage","getItem","user","setUser","logout","type","window","reload","token","decodedToken","exp","Date","getTime","appBar","textDecoration","brandContainer","heading","toolbar","profile","purple","result","name","imageUrl","charAt","userName"],"sources":["/Users/meetdhabaliya/Desktop/MERN APP/client/src/components/Navbar/Navbar.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\nimport { AppBar, Typography, Toolbar, Button, Avatar } from '@material-ui/core'\nimport useStyles from './styles'\nimport memories from '../../images/memories.jpg'\nimport { Link, useLocation } from 'react-router-dom'\nimport { useDispatch } from 'react-redux'\nimport decode from 'jwt-decode'\n\n\nconst Navbar = () => {\n    const classes = useStyles();\n    const dispatch = useDispatch();\n    const location = useLocation()\n    const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\n\n    const logout = () => {\n        dispatch({ type: 'LOGOUT' })\n        setUser(null)\n        // navigate('/')\n        window.location.reload()\n    }\n\n    useEffect(() => {\n        const token = user?.token\n\n        if (token) {\n            const decodedToken = decode(token);\n            if (decodedToken.exp * 1000 < new Date().getTime()) {\n                logout()\n            }\n        }\n\n        setUser(JSON.parse(localStorage.getItem('profile')))\n\n    }, [location])\n\n    return (\n        <AppBar className={classes.appBar} position='static' color='inherit'>\n            <Link to='/' style={{ textDecoration: 'none' }} className={classes.brandContainer}>\n                <Typography className={classes.heading} variant='h2' align='center'>Memories</Typography>\n                {/* <img className={classes.image} src={memories} alt=\"memories\" height='60'></img> */}\n            </Link>\n            <Toolbar className={classes.toolbar}>\n                {user ?\n                    (<div className={classes.profile}>\n                        <Avatar className={classes.purple} alt={user.result.name} src={user.result.imageUrl}>{user.result.name.charAt(0)}</Avatar>\n                        <Typography className={classes.userName} variant='h6'>{user.result.name}</Typography>\n                        <Button className={classes.logout} variant='contained' color='secondary' onClick={logout}>Logout</Button>\n                    </div>\n                    ) : (\n                        <Button component={Link} to='/auth' variant='contained' color='primary'>Sign In</Button>\n                    )\n                }\n            </Toolbar>\n        </AppBar>\n    )\n}\n\nexport default Navbar\n"],"mappings":"mKAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,OAASC,MAAT,CAAiBC,UAAjB,CAA6BC,OAA7B,CAAsCC,MAAtC,CAA8CC,MAA9C,KAA4D,mBAA5D,CACA,MAAOC,UAAP,KAAsB,UAAtB,CACA,MAAOC,SAAP,KAAqB,2BAArB,CACA,OAASC,IAAT,CAAeC,WAAf,KAAkC,kBAAlC,CACA,OAASC,WAAT,KAA4B,aAA5B,CACA,MAAOC,OAAP,KAAmB,YAAnB,CAGA,GAAMC,OAAM,CAAG,QAATA,OAAS,EAAM,CACjB,GAAMC,QAAO,CAAGP,SAAS,EAAzB,CACA,GAAMQ,SAAQ,CAAGJ,WAAW,EAA5B,CACA,GAAMK,SAAQ,CAAGN,WAAW,EAA5B,CACA,cAAwBT,QAAQ,CAACgB,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAD,CAAhC,wCAAOC,IAAP,eAAaC,OAAb,eAEA,GAAMC,OAAM,CAAG,QAATA,OAAS,EAAM,CACjBR,QAAQ,CAAC,CAAES,IAAI,CAAE,QAAR,CAAD,CAAR,CACAF,OAAO,CAAC,IAAD,CAAP,CACA;AACAG,MAAM,CAACT,QAAP,CAAgBU,MAAhB,GACH,CALD,CAOA1B,SAAS,CAAC,UAAM,CACZ,GAAM2B,MAAK,CAAGN,IAAH,SAAGA,IAAH,iBAAGA,IAAI,CAAEM,KAApB,CAEA,GAAIA,KAAJ,CAAW,CACP,GAAMC,aAAY,CAAGhB,MAAM,CAACe,KAAD,CAA3B,CACA,GAAIC,YAAY,CAACC,GAAb,CAAmB,IAAnB,CAA0B,GAAIC,KAAJ,GAAWC,OAAX,EAA9B,CAAoD,CAChDR,MAAM,GACT,CACJ,CAEDD,OAAO,CAACL,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,SAArB,CAAX,CAAD,CAAP,CAEH,CAZQ,CAYN,CAACJ,QAAD,CAZM,CAAT,CAcA,mBACI,oBAAC,MAAD,EAAQ,SAAS,CAAEF,OAAO,CAACkB,MAA3B,CAAmC,QAAQ,CAAC,QAA5C,CAAqD,KAAK,CAAC,SAA3D,eACI,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,CAAa,KAAK,CAAE,CAAEC,cAAc,CAAE,MAAlB,CAApB,CAAgD,SAAS,CAAEnB,OAAO,CAACoB,cAAnE,eACI,oBAAC,UAAD,EAAY,SAAS,CAAEpB,OAAO,CAACqB,OAA/B,CAAwC,OAAO,CAAC,IAAhD,CAAqD,KAAK,CAAC,QAA3D,aADJ,CADJ,cAKI,oBAAC,OAAD,EAAS,SAAS,CAAErB,OAAO,CAACsB,OAA5B,EACKf,IAAI,cACA,2BAAK,SAAS,CAAEP,OAAO,CAACuB,OAAxB,eACG,oBAAC,MAAD,EAAQ,SAAS,CAAEvB,OAAO,CAACwB,MAA3B,CAAmC,GAAG,CAAEjB,IAAI,CAACkB,MAAL,CAAYC,IAApD,CAA0D,GAAG,CAAEnB,IAAI,CAACkB,MAAL,CAAYE,QAA3E,EAAsFpB,IAAI,CAACkB,MAAL,CAAYC,IAAZ,CAAiBE,MAAjB,CAAwB,CAAxB,CAAtF,CADH,cAEG,oBAAC,UAAD,EAAY,SAAS,CAAE5B,OAAO,CAAC6B,QAA/B,CAAyC,OAAO,CAAC,IAAjD,EAAuDtB,IAAI,CAACkB,MAAL,CAAYC,IAAnE,CAFH,cAGG,oBAAC,MAAD,EAAQ,SAAS,CAAE1B,OAAO,CAACS,MAA3B,CAAmC,OAAO,CAAC,WAA3C,CAAuD,KAAK,CAAC,WAA7D,CAAyE,OAAO,CAAEA,MAAlF,WAHH,CADA,cAOG,oBAAC,MAAD,EAAQ,SAAS,CAAEd,IAAnB,CAAyB,EAAE,CAAC,OAA5B,CAAoC,OAAO,CAAC,WAA5C,CAAwD,KAAK,CAAC,SAA9D,YARZ,CALJ,CADJ,CAoBH,CA/CD,CAiDA,cAAeI,OAAf"},"metadata":{},"sourceType":"module"}